# Remove “Captain” Concept Across App and Backend

## Context
We need to completely remove the concept of a team “captain” from the platform. This includes database schema, API contracts, server logic, frontend UI/logic, types, and translations. The system should behave the same for all team members; any captain-only restrictions must be removed.

## Scope and Impacted Areas
- Database schema and seed/migration scripts
- Backend APIs (read/write paths)
- Shared types/interfaces
- Frontend pages and components (TeamDetail, Admin views, modals)
- i18n strings
- Existing data migration for production

## Files/Modules to Update

### Backend / DB
- `server/src/schema/team_members.ts` (or equivalent schema/migrations)
  - Remove `role` column or make it non-captain specific (if other roles not used, drop entirely).
  - Create a DB migration to drop the `role` column from `team_members` (nullable default to migration, then drop).
- `server/src/api.ts` (and related route handlers/services)
  - Remove any guards/conditionals based on `role === 'captain'`.
  - Adjust validation to remove captain-only constraints.
- Seed/fixtures (if any) that set captains
  - Remove captain assignments.

### Backend Types
- `server/src/types/*` and/or `server/src/api.ts`
  - Remove `role` from `TeamMember` types if not needed anywhere else.

### Frontend Types and API Client
- `ui/src/lib/serverComm.ts`
  - Remove `role` from `TeamMember` interface.
  - Ensure all API calls and returns do not rely on `role`.

### Frontend UI
- `ui/src/pages/TeamDetail.tsx`
  - Remove any logic that checks `member.role` or “captain-only” UIs/guards.
  - Ensure remove-member and other actions are not restricted by captain status.
- `ui/src/pages/AdminAllTeams.tsx`
  - Confirm no role-based logic remains (already removed where applicable).
- Other components (search, modals) that might reference captain
  - `ui/src/components/PlayerSearchModal.tsx`
  - Any list/table showing role
  - Remove role column/labels.

### i18n
- Remove captain-related keys from:
  - `ui/src/locales/en/common.json`
  - `ui/src/locales/es/common.json`
- Search other namespaces for `captain` usage and delete.

## API/Schema Changes
- DB Migration
  1. Create migration to drop `role` column on `team_members` table (or set to NULL then drop if needed by RDBMS).
  2. Ensure no constraints or indexes reference `role`.
- API Responses
  - Remove `role` from team member payloads.
- API Requests
  - Remove any captain promotion/demotion endpoints if they exist.

## Data Migration Strategy
- If existing data has `role = 'captain'`, no forward mapping is needed—simply drop the column. If other roles exist, confirm they are obsolete; otherwise introduce a new non-privileged informational field (out of scope unless required).

## Validation/Rules Changes
- Remove any rule requiring “captain” for certain actions; use admin or team creator logic as needed.
- Keep existing admin/creator checks intact.

## Testing Checklist
- Backend
  - Migrations apply cleanly; no references to `role` remain.
  - All team member CRUD and availability endpoints work without `role`.
- Frontend
  - TeamDetail and AdminTeam editing flows allow removing any member.
  - No UI text or tooltips mention captain.
  - Player search/add/remove flows work as before.
- i18n
  - No missing keys for removed captain strings.

## Phases (If Needed)
1. Phase 1 — Data Layer
   - Prepare and run DB migration to drop `role`.
   - Update server types and handlers.
2. Phase 2 — Frontend
   - Update UI and types; remove role-based logic.
   - Remove captain translations.
3. Phase 3 — Verification
   - End-to-end testing in staging; deploy.
