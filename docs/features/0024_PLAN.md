# Team Members Modal in Admin Leagues Page

## Overview

Add functionality to the admin leagues page where clicking on a team in the collapsible teams list opens a modal displaying the team members. The implementation will reuse the existing `TeamDetail` component that is already used in the admin teams page to display team members.

## Technical Requirements

### Frontend Changes

**File: `ui/src/pages/AdminLeagues.tsx`**

1. **Import TeamDetail component**:
   - Add import for `TeamDetail` component from `./TeamDetail`
   - Add import for `Dialog` and `DialogContent` if not already imported (should already be imported)

2. **Add state management**:
   - Add state for selected team info: `const [selectedTeamInfo, setSelectedTeamInfo] = useState<{ teamId: string; leagueId: string } | null>(null);`
   - This will track which team's members should be displayed in the modal and which league it belongs to (for efficient refresh)

3. **Update team display click handler**:
   - Modify the team item display in the collapsible section (around line 458-477)
   - Make the team name/div clickable to open the modal
   - Add `onClick` handler that calls `setSelectedTeamInfo({ teamId: item.team.id, leagueId: league.id })` when clicking on a team
   - Store both teamId and leagueId to avoid searching for the league when refreshing teams on modal close
   - Ensure the remove button (X) still works independently and doesn't trigger the modal

4. **Add TeamDetail modal**:
   - Add a `Dialog` component that opens when `selectedTeamInfo` is not null
   - **IMPORTANT: Accessibility Requirement**: Add `DialogTitle` with `sr-only` class inside `DialogContent` for screen reader accessibility
   - Use translation key `tTeams('teamDetails')` for the DialogTitle
   - Inside the `DialogContent`, render `TeamDetail` component with:
     - `teamId={selectedTeamInfo.teamId}`
     - `embedded={true}` (to show it in a modal context)
     - `forceAdmin={true}` (to show admin features)
     - `onClose` callback that:
       - Refreshes teams for the league using `selectedTeamInfo.leagueId` (if available)
       - Sets `selectedTeamInfo` to `null` to close the modal
   - Use the same Dialog styling pattern as in AdminTeams.tsx (around line 691-699)
   - Style: `max-w-3xl min-h-[60vh] max-h-[90vh] overflow-y-auto p-4`

5. **Update team list rendering**:
   - Make the team name or the team container clickable (add cursor-pointer class)
   - Ensure proper event handling to prevent the remove button click from opening the modal
   - Consider wrapping the team name/div in a clickable element or adding onClick to the container div

### Algorithm

1. **User clicks on a team**:
   - Click event is captured on the team item (excluding the remove button)
   - `setSelectedTeamInfo({ teamId: item.team.id, leagueId: league.id })` is called
   - Modal state becomes `open={!!selectedTeamInfo}`

2. **Modal opens with TeamDetail**:
   - `TeamDetail` component loads team data using the provided `teamId`
   - Component fetches team details including members list via API
   - Members are displayed with avatars, names, payment status, etc. (reusing existing TeamDetail functionality)

3. **User closes modal**:
   - User clicks close button or outside modal
   - `onClose` callback refreshes teams for the league using `selectedTeamInfo.leagueId` (if available)
   - `onClose` callback sets `selectedTeamInfo` to `null`
   - Modal closes and state is reset

### Files to Modify

- `ui/src/pages/AdminLeagues.tsx`:
  - Add imports for TeamDetail and DialogTitle
  - Add state for selectedTeamInfo (teamId and leagueId)
  - Update team item rendering to be clickable
  - Add Dialog with TeamDetail component
  - Add DialogTitle with sr-only class for accessibility
  - Handle click events properly to distinguish between team click and remove button click
  - Optimize refresh logic by storing leagueId when opening modal

### Reusable Components

- `ui/src/pages/TeamDetail.tsx`: Already exists and supports embedded mode
  - No changes needed to this component
  - Already handles:
    - Loading team data
    - Displaying team members list
    - Showing member avatars, names, payment status
    - Admin features (forceAdmin prop)
    - Modal context (embedded prop)

### Implementation Notes

- The TeamDetail component already supports all the functionality needed
- The main work is connecting the click handler in AdminLeagues to open the modal
- Ensure the remove button (X) click event doesn't bubble up to trigger the modal
- Use the same Dialog pattern and styling as AdminTeams.tsx for consistency
- **Accessibility Requirement**: All DialogContent components must include a DialogTitle for screen reader accessibility. When using embedded components like TeamDetail that have their own visual headers, use `sr-only` class on DialogTitle to hide it visually while keeping it accessible.
- **Performance Optimization**: Store both teamId and leagueId when opening the modal to avoid searching through all leagues when refreshing teams on modal close
- No backend changes are needed as TeamDetail uses existing API endpoints

### Accessibility Requirements

- **DialogTitle Requirement**: All `DialogContent` components must include a `DialogTitle` for screen reader accessibility. This is required by Radix UI (which shadcn/ui Dialog is based on).
- When using embedded components (like `TeamDetail` with `embedded={true}`) that have their own visual headers, use the `sr-only` class on `DialogTitle` to hide it visually while keeping it accessible to screen readers.
- Example:
  ```tsx
  <DialogContent>
    <DialogTitle className="sr-only">{tTeams('teamDetails')}</DialogTitle>
    <TeamDetail ... />
  </DialogContent>
  ```

